<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">

    <form name="manufacturing-dashboard-user" title="User Dashboard" model="com.axelor.auth.db.User"
          canNew="false" canSave="false" width="large">
        <panel name="mainPanel">
            <field name="$user" title="User" type="many-to-one" target="com.axelor.auth.db.User" required="true"/>
            <spacer name="userSpacer" colSpan="6"/>
            <field name="$dateFrom" title="From" widget="date" required="true"/>
            <field name="$dateTo" title="To" widget="date" required="true"/>
        </panel>
        <panel-dashlet name="durationOnMOsPanel" title="Duration on MOs" showIf="$user &amp;&amp; $dateFrom &amp;&amp; $dateTo" action="action-production-view-duration-on-mos"/>
    </form>
	
     <form id="production-user-form-extension" name="user-form" title="User" model="com.axelor.auth.db.User" extension="true">
    	<panel name="mainPanel" sidebar="true" if="__config__.app.isApp('production') &amp;&amp; __config__.app.getApp('production').getManageWorkshop()">
    		<field name="workshopStockLocation" onSelect="action-user-attrs-domain-workshop-stock-location"/>
    	</panel>
    </form>
	

    <action-view name="action-production-view-duration-on-mos" title="">
        <view name="chart.duration.on.mos" type="chart"/>
        <context name="userId" expr="eval: user.id"/>
        <context name="dateFrom" expr="eval: dateFrom"/>
        <context name="dateTo" expr="eval: dateTo"/>
    </action-view>
	
	<action-attrs name="action-user-attrs-domain-workshop-stock-location">
		<attribute name="domain" for="workshopStockLocation" expr="eval: activeCompany != null ? &quot; self.company = :activeCompany and self.isWorkshop = true &quot; : null"/>
	</action-attrs>
	
</object-views>
