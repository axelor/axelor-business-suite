<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">


    <grid name="partner-price-list-grid" title="Price lists"
          model="com.axelor.apps.base.db.PartnerPriceList">
        <field name="label"/>
        <field name="typeSelect"/>
        <field name="isExclusive"/>
    </grid>

    <form name="sale-partner-price-list-form" title="Price lists"
          model="com.axelor.apps.base.db.PartnerPriceList"
          onNew="action-record-partner-price-list-record-sale-type"
          width="large">
        <panel name="mainPanel">
            <field name="label"/>
            <field name="typeSelect" readonly="true" colSpan="4"/>
            <field name="isExclusive"/>
            <field name="priceListSet"
                   grid-view="price-list-grid"
                   form-view="sale-price-list-form"
                   onChange="action-method-partner-price-list-check-dates"
                   domain="self.typeSelect = 1"
                   colSpan="12"/>
        </panel>
        <panel-dashlet name="customersPanel" title="Customers" action="action-partner-price-list-dashlet-customer" colSpan="12"/>
    </form>

    <form name="purchase-partner-price-list-form" title="Price lists"
          model="com.axelor.apps.base.db.PartnerPriceList"
          onNew="action-record-partner-price-list-record-purchase-type"
          width="large">
        <panel name="mainPanel">
            <field name="label"/>
            <field name="typeSelect" readonly="true" colSpan="4"/>
            <field name="isExclusive"/>
            <field name="priceListSet"
                   grid-view="price-list-grid"
                   form-view="purchase-price-list-form"
                   onChange="action-method-partner-price-list-check-dates"
                   domain="self.typeSelect = 2"
                   colSpan="12"/>
        </panel>
        <panel-dashlet name="suppliersPanel" title="Suppliers" action="action-partner-price-list-dashlet-supplier" colSpan="12"/>
    </form>

    <action-record name="action-record-partner-price-list-record-sale-type"
                   model="com.axelor.apps.base.db.PartnerPriceList">
        <field name="typeSelect" expr="1"/>
    </action-record>

    <action-record name="action-record-partner-price-list-record-purchase-type"
                   model="com.axelor.apps.base.db.PartnerPriceList">
        <field name="typeSelect" expr="2"/>
    </action-record>

    <action-method name="action-method-partner-price-list-check-dates">
        <call class="com.axelor.apps.base.web.PartnerPriceListController"
              method="checkDates"/>
    </action-method>
    
    <action-view name="action-partner-price-list-dashlet-customer" title="Customers" model="com.axelor.apps.base.db.Partner">
    	<view type="grid" name="partner-customer-grid"/>
    	<view type="form" name="partner-customer-form"/>
    	<domain>self.salePartnerPriceList = :partnerPriceList</domain>
    	<context name="partnerPriceList" expr="eval: id"/>
    </action-view>
    
    <action-view name="action-partner-price-list-dashlet-supplier" title="Suppliers" model="com.axelor.apps.base.db.Partner">
    	<view type="grid" name="partner-supplier-grid"/>
    	<view type="form" name="partner-supplier-form"/>
    	<domain>self.purchasePartnerPriceList = :partnerPriceList</domain>
    	<context name="partnerPriceList" expr="eval: id"/>
    </action-view>
</object-views>
