<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">
    
    <action-view name="action-contract-sale-order-dashlet" title="Sales orders" model="com.axelor.apps.sale.db.SaleOrder">
    	<view type="grid" name="sale-order-grid"/>
    	<view type="form" name="sale-order-form"/>
    	<domain>self.contract.id = :_contractId</domain>
    	<context name="_contractId" expr="eval:id"/>
    </action-view>
    
    <action-view name="action-contract-create-so" title="Create Sales Order" model="com.axelor.apps.sale.db.SaleOrder">
    	<view type="form" name="sale-order-form"/>
    	<view type="grid" name="sale-order-grid"/>
    	<domain>self.contract.id = :_contractId</domain>
    	<context name="_contractId" expr="eval:id"/>
    	<context name="_customer" expr="eval:partner"/>
    	<context name="_paymentMode" expr="eval:paymentMode"/>
    	<context name="_paymentCondition" expr="eval:paymentCondition"/>
    </action-view>
    
    <action-group id="contract-action-group-sale-saleorder-onnew" name="action-group-sale-saleorder-onnew">
    	<action name="action-sale-order-record-default"/>
    	<action name="action-sale-order-record-company-configuration"/>
    	<action name="action-sale-order-record-currency"/>
    	<action name="action-sale-order-attrs-collapse-specific-settings-group"/>
    	<action name="action-sale-order-record-in-ati"/>
    	<action name="action-sale-order-attrs-in-ati"/>
    	<action name="action-contract-sale-order-record-new" if="__config__.app.isApp('contract')"/>
    </action-group>
    
    <action-record name="action-contract-sale-order-record-new" model="com.axelor.apps.sale.db.SaleOrder">
    	<field name="clientPartner" expr="eval:_customer" if="_customer != null"/>
    	<field name="contract" expr="eval: __repo__(Contract).find(_contractId)" if="_contractId != null"/>
    	<field name="paymentModel" expr="eval: _paymentMode"/>
    	<field name="paymentCondition" expr="eval: _paymentCondition"/>
    </action-record>
    
</object-views>