<?xml version="1.0" encoding="utf-8"?>
<xml-inputs xmlns="http://axelor.com/xml/ns/data-import"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/data-import http://axelor.com/xml/ns/data-import/data-import_5.0.xsd">
 	
   <input file="ebics-user.xml" root="ebics-users" >
  	<bind node="ebics-user" type="com.axelor.apps.bankpayment.db.EbicsUser"  call="com.axelor.apps.bankpayment.ebics.script.EbicsUserImport:importEbicsUser">
      <bind node="name" to="name" />
      <bind node="userId" to="userId" />
      <bind node="password" to="password" />
      <bind node="ebicsTypeSelect" to="ebicsTypeSelect" />
      <bind node="statusSelect" to="statusSelect" />
      <bind node="ebicsPartner" to="ebicsPartner" search="self.partnerId = :partnerId" update="false">
      	<bind node="partnerId" to="partnerId" alias="partnerId"/>
      	<bind node="ebicsBank" to="ebicsBank" search="self.hostId = :hostId" update="false">
	   		<bind node="hostId" to="hostId" alias="hostId"/>
	   		<bind node="name" to="name" />
	   		<bind node="fullName" to="fullName"/>
	   		<bind node="url" to="url"/>
	   		<bind node="testMode" to="testMode"/>
	   		<bind node="languageSelect" to="languageSelect"/>
	   		<bind node="bank" to="bank" search="self.code = :code"  update="false">
	   			<bind node="code" to="code" />
	   			<bind node="bankName" to="bankName" />
	   			<bind node="bankAddress" to="bankAddress" />
	   		</bind>
	   		<bind node="ebicsCertificateList/ebicsCertificate" to="ebicsCertificateList" search="self.typeSelect = :bankCertType and self.ebicsBank.hostId = :hostId" >
	   			<bind node="typeSelect" to="typeSelect" />
	   			<bind node="pem" to="pemString" />
	   		</bind>
	   		<bind node="certValidityPeriodSelect" to="certValidityPeriodSelect" />
	   		<bind node="protocolSelect" to="protocolSelect" />
      	</bind>
      </bind>
      <bind node="securityMedium" to="securityMedium" />
      <bind node="nextOrderId" to="nextOrderId"  />
      <bind node="associatedUserCode" to="associatedUser" search="self.code = :userCode" update="true" alias="userCode"/>
      <bind node="dn" to="dn" />
      <bind to="a005Certificate" node="a005Certificate">
      	<bind node="pem" to="pemString" />
      	<bind to="typeSelect" eval="'signature'"  />
      	<bind node="privateKey" to="privateKey" eval="privateKey != null ? org.apache.commons.codec.binary.Base64.decodeBase64(privateKey) : null" />
      </bind> 
      <bind to="e002Certificate" node="e002Certificate">
      	<bind node="pem" to="pemString" />
      	<bind to="typeSelect" eval="'encryption'" />
      	<bind node="privateKey" to="privateKey" eval="privateKey != null ? org.apache.commons.codec.binary.Base64.decodeBase64(privateKey) : null" />
      </bind> 
      <bind to="x002Certificate" node="x002Certificate">
      	<bind node="pem" to="pemString" />
      	<bind to="typeSelect" eval="'authentication'" />
      	<bind node="privateKey" to="privateKey" eval="privateKey != null ? org.apache.commons.codec.binary.Base64.decodeBase64(privateKey) : null"/>
      </bind>
      <bind node="ebicsRequestLogList/requestLog" to="ebicsRequestLogList">
   		<bind node="requestType" to="requestType" />
   		<bind node="requestTime" to="requestTime" />
   		<bind node="responseCode" to="responseCode" />
      </bind>
    </bind>
  </input> 
    	
</xml-inputs>