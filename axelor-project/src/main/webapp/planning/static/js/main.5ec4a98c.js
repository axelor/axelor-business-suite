webpackJsonp([1],{0:function(t,e,a){a(332),t.exports=a(336)},80:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){function n(r,o){try{var s=e[r](o),i=s.value}catch(t){return void a(t)}return s.done?void t(i):Promise.resolve(i).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.convertNumberToTime=e.convertTimeToNumber=e.convertDuration=e.validateDuration=void 0;var u=a(337),d=n(u),c=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),f=function(){function t(t,e){var a=[],n=!0,r=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done)&&(a.push(s.value),!e||a.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=a(2),m=n(p),h=a(1),v=n(h),k=a(106),y=a(425),g=n(y),b=a(125),j=(n(b),a(335)),D=n(j);a(148);var E=a(126),T=n(E),w="com.axelor.apps.project.db.ProjectPlanningTime",O="com.axelor.apps.base.db.Product",C=["task","task.name","id","date","fromDate","toDate","fromEditor","project","timepercent","user","realHrs","plannedHours","product","description"],N=(e.validateDuration=function(t){var e=t.split(":");if(e.length<=2&&e.length>=1){var a=f(e,2),n=a[0],r=a[1];if(!isNaN(n)&&void 0===r&&n<=60&&n>=0||void 0!==r&&!isNaN(r)&&r>=0&&r<=60)return!0}return!1},e.convertDuration=function(t){var e=t.split("."),a=f(e,2),n=a[0],r=a[1],o=null,s=void 0===n?0:n,i=void 0===r?0:r;return r>59&&(i=r%60,s+=r/60),o=s+":"+i},e.convertTimeToNumber=function(t){var e=t.split(":"),a=f(e,2),n=a[0],r=a[1],o=null,s=void 0===n?0:Number(n),i=void 0===r?0:Number(r);return r>59&&(i=r%60,s+=r/60),o=s+i/60,""+o},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e="00";return t.length>=2?e=t:1===t.length&&(e="0"+t),e}),P=(e.convertNumberToTime=function(t){var e=t;if(t.indexOf(":")<0){var a=t.split("."),n=f(a,2),r=n[0],o=n[1];e=N(r);var s=N(""+Math.round(60*parseFloat("0."+o)));e=e+":"+s}return e},1),S=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],F=function(t){function e(t){s(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state={show:!1,confirmPopUp:!1,confirmMessage:"",html:1,editorError:{subTask:"",project:"",user:""},editor:{project:{},task:{},date:(0,v.default)().format("YYYY-MM-DD"),duration:"0",user:{},description:null,timepercent:0,product:null},timepercentList:[0,10,20,30,40,50,60,70,80,90,100],currentDate:(0,v.default)().format("DD-MM-YYYY"),fromDate:null,toDate:null,modeCount:0,rowDates:[],dateWise:{},tasks:{},taskTotal:{},grandTotal:0,mode:"week",projectTaskList:[],subTaskList:[],productList:[],userList:[],taskDateFormat:"YYYY-MM-DD",taskData:[],collapseUser:[],params:{},displayUser:[],selectedProjectList:[]},a}return l(e,t),c(e,[{key:"groupTasks",value:function(t,e){var a=this,n={},r={},o={},s=0;return t[0].dummyCounter||(t.forEach(function(t){var e=t.user,r=t.project,o=t.projectId,s=t.task,i=t.taskId,l=t.id,u=t.taskName,d=o+"_"+i,c="user_"+e.id;if(n[c]||(n[c]=Object.assign({},e,{isCollapse:a.state.collapseUser.indexOf(e.id)>-1})),!n[d]&&a.state.collapseUser.indexOf(e.id)<0){var f=a.state.selectedProjectList.indexOf(l)>-1;n[d]={user:e,project:r,projectId:o,isSelected:f,task:s,taskId:i,taskName:u}}}),this.state.displayUser.forEach(function(t){var e="user_"+t.id;n[e]||(n[e]=Object.assign({},t,{isCollapse:a.state.collapseUser.indexOf(t.id)>-1}))}),Object.keys(n).forEach(function(a){if(a.startsWith("user")){var r=t.filter(function(t){return t.user.id===n[a].id&&e.indexOf(t.date)>-1}),s="dummy"+a;r.length>0?r.forEach(function(t){o[s]||(o[s]=0),o[s]+=t.duration}):o[s]=0}else{var i=n[a],l=i.taskId,u=i.projectId,d=i.id,c=(t.find(function(t){return(t.id===d&&t.taskId===l&&t.projectId===u)>-1}),t.filter(function(t){return t.taskId===l&&t.projectId===u&&e.indexOf(t.date)>-1}));c.length>0?c.forEach(function(t){o[a]||(o[a]=0),o[a]+=t.duration}):o[a]=0}}),Object.keys(o).forEach(function(t){o[t]=o[t].toFixed(2)}),e.forEach(function(e){var o=r[e]||{tasks:{},total:0},i=0,l=Object.keys(n);l.forEach(function(r){if(r.startsWith("user")){var l=n[r],u=t.filter(function(t){return t.date===e&&t.user.id===n[r].id}),d=u.length>0?u.map(function(t){return t.duration}).reduce(function(t,e){return Number(t)+Number(e)}):0,c=a.state.displayUser.filter(function(t){return t.id===l.id})[0]||{},f="normal";Number(c.dailyWorkHours)===d?f="success":c.dailyWorkHours<d&&(f="danger");var p=new Date(e);(c.holiday.indexOf(e)>-1||c.weekend.indexOf(p.getDay())>-1)&&(f=0!==d?"danger":"success"),o.tasks["dummy"+r]={duration:d.toFixed(2),durationClass:f},i+=d,s+=d}else{var m=n[r],h=m.taskId,v=m.projectId,k=m.task,y=void 0===k?null:k,g=m.id,b=m.user,j=m.project,D=(m.index,m.taskName),E=t.filter(function(t){return t.date===e&&t.projectId===v&&t.taskId===h}),T=E[0]?E[0].duration:0;if((null===a.state.fromDate||e>=a.state.fromDate)&&(e<=a.state.toDate||null===a.state.toDate)){var w=a.state.displayUser.filter(function(t){return t.id===b.id})[0],O="normal";Number(w.dailyWorkHours)===T?O="success":w.dailyWorkHours<T&&(O="danger");var C=new Date(e);(w.holiday.indexOf(e)>-1||w.weekend.indexOf(C.getDay())>-1)&&(O=0!==T?"danger":"success");var N=a.state.selectedProjectList.indexOf(g)>-1;o.tasks[v+"_"+h]={taskId:h,user:b,projectId:v,project:j,isSelected:N,durationClass:O,taskName:D,duration:T.toFixed(2),date:e,task:y,id:g}}else o.tasks["dummy"+v+"_"+h]={duration:""}}}),o.total=i.toFixed(2),r[e]=o})),{tasks:n,dateWise:r,taskTotal:o,grandTotal:s.toFixed(2)}}},{key:"getRowDates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=7,o=(0,v.default)().add(t,"week").startOf("week").weekday(1),s=[];a&&(o=(0,v.default)(a).add(t,"week").startOf("week").weekday(1)),"month"===e&&(o=(0,v.default)().add(t,"months").startOf("months"),r=o.daysInMonth());for(var i=0,l=0;l<r;l++)s.push(o.format(this.state.taskDateFormat)),null!==a&&o.format(this.state.taskDateFormat)<a?i++:null!==n&&o.format(this.state.taskDateFormat)>n&&i++,o.add("d",1);return i!==r?s:[]}},{key:"updateDuration",value:function(t){var e=t.projectId,a=t.date,n=t.duration,r=t.taskId,o=(t.task,t.projectPlanningId),s={},i=this.state,l=i.taskData,u=(i.rowDates,!1),d=!1;if(""!==n){for(var c=0;c<l.length;c++){var f=l[c];a===f.date&&f.projectPlanningId===o&&f.taskId===r&&e===f.projectId&&(f.duration!==n&&(d=!0),f.duration=n,l[c]=f,u=!0,s=f)}if(d||!u&&0!==n){d=!1;var p={};p=Object.keys(s).length>0?Object.assign({},s,{project:{id:s.projectId,fullName:s.project},product:s.product||null,plannedHours:s.duration,user:t.user}):Object.assign({},t,{user:{id:t.user.id,name:t.user.fullName},project:{id:t.projectId,fullName:t.project},product:t.product||null,plannedHours:t.duration,date:t.date}),this.saveData(p)}else this.forceUpdate()}}},{key:"gotoPrev",value:function(){var t=this.state.modeCount-1,e=this.getRowDates(t,this.state.mode,this.state.fromDate,this.state.toDate);if(e.length>0){var a=this.groupTasks(this.state.taskData,e),n=a.tasks,r=a.dateWise,o=a.taskTotal,s=a.grandTotal,i=this.setDummyRecord(n,r,o);this.setState({modeCount:t,rowDates:e,tasks:i.tasks,taskTotal:i.taskTotal,grandTotal:s,dateWise:i.dateWise,editor:Object.assign({},this.state.editor,{date:e[0]})})}}},{key:"gotoNext",value:function(){var t=this.state.modeCount+1,e=this.getRowDates(t,this.state.mode,this.state.fromDate,this.state.toDate);if(e.length>0){var a=this.groupTasks(this.state.taskData,e,this.state.fromDate),n=a.tasks,r=a.dateWise,o=a.taskTotal,s=a.grandTotal,i=this.setDummyRecord(n,r,o);this.setState({modeCount:t,rowDates:e,tasks:i.tasks,taskTotal:i.taskTotal,grandTotal:s,dateWise:i.dateWise,editor:Object.assign({},this.state.editor,{date:e[0]})})}}},{key:"changeMode",value:function(t){var e=this,a=0,n=this.getRowDates(a,t,this.state.fromDate,this.state.toDate);if(n.length>0){var r=this.groupTasks(this.state.taskData,n),o=r.tasks,s=r.dateWise,i=r.taskTotal,l=r.grandTotal,u=this.setDummyRecord(o,s,i);this.setState(function(){return{mode:t,rowDates:n,modeCount:a,dateWise:u.dateWise,tasks:u.tasks,taskTotal:u.taskTotal,grandTotal:l,editor:Object.assign({},e.state.editor,{date:e.state.rowDates[0]})}})}}},{key:"setDummyRecord",value:function(t,e,a){if(Object.keys(t).length<5)for(var n=Object.keys(t).length,r=Object.keys(e).length,o=function(o){if(0!==r)Object.keys(e).forEach(function(t){e[t].tasks["dummy_"+o]={duration:""}});else{var s={};s.tasks=[];for(var i=n;i<5;i++)s.tasks["dummy_"+i]={duration:""};e[o]=s}t["dummy_"+o]={project:""},a["dummy_"+o]=""},s=n;s<5;s++)o(s);return{tasks:t,taskTotal:a,dateWise:e}}},{key:"getParams",value:function(){for(var t=/[?&]([^=#]+)=([^&#]*)/g,e=window.location.href,a={},n=void 0;n=t.exec(e);)a[n[1]]=n[2];return a}},{key:"sortTaskData",value:function(t){var e=[];return t.forEach(function(t){t.id&&e.push(t)}),t.sort(function(t,e){return t.user.id<e.user.id?-1:t.user.id>e.user.id?1:t.id<e.id?-1:t.id>e.id?1:0})}},{key:"setEmployeeData",value:function(){function t(){return e.apply(this,arguments)}var e=o(d.default.mark(function t(){var e,a,n=this;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new T.default,a=this.state.displayUser,t.abrupt("return",new Promise(function(t,o){var s=a.map(function(t){if(null!==t.employeeId)return t.employeeId}).filter(function(t){return t});0===s.length&&s.push(-1);var i=[{fieldName:"id",operator:"in",value:s}];e.search("com.axelor.apps.hr.db.Employee",i,0,null,["id"],[]).then(function(o){if(o.data&&o.data.length){var s=o.data;s.forEach(function(t){for(var e=0;e<a.length;e++){var n=a[e];if(n.employeeId===t.id){n.dailyWorkHours=t.dailyWorkHours,n.planning=t.weeklyPlanning,n.publicHolidayPlanning=t.publicHolidayEventsPlanning,a[e]=n;break}}});var i=[].concat(r(new Set(a.map(function(t){var e=t.publicHolidayPlanning;if(e&&null!==e)return e.id}).filter(function(t){return t}))));0===i.length&&i.push(-1);var l=[{fieldName:"id",operator:"in",value:i}];e.search("com.axelor.apps.base.db.EventsPlanning",l,0,null,["id"],[]).then(function(r){if(r.data&&r.data.length){var o=r.data;o.forEach(function(t){var n=t.eventsPlanningLineList.map(function(t){return t.id}),r=[{fieldName:"id",operator:"in",value:n}];e.search("com.axelor.apps.base.db.EventsPlanningLine",r,0,null,["id"],[]).then(function(e){if(e&&e.data.length){var n=e.data.map(function(t){return t.date});a.forEach(function(e){e.publicHolidayPlanning&&e.publicHolidayPlanning.id===t.id&&(e.holiday=n)})}})})}else n.setState(function(){return{displayUser:a}}),t(!0)});var u=[].concat(r(new Set(a.map(function(t){var e=t.planning;if(e&&null!==e)return e.id}).filter(function(t){return t})))),d=[{fieldName:"id",operator:"in",value:u}];e.search("com.axelor.apps.base.db.WeeklyPlanning",d,0,null,["id"],[]).then(function(r){if(r.data&&r.data.length){var o=r.data;o.forEach(function(r){var o=r.weekDays.map(function(t){return t.id}),s=[{fieldName:"id",operator:"in",value:o}];e.search("com.axelor.apps.base.db.DayPlanning",s,0,null,["id"],[]).then(function(e){if(e.data.length){var o=e.data,s=o.map(function(t){if(null===t.morningFrom&&null===t.afternoonFrom)return S.indexOf(t.name)}).filter(function(t){return void 0!==t});a.forEach(function(t){t.planning&&t.planning.id===r.id&&(t.weekend=s)}),n.setState(function(){return{displayUser:a}}),t(!0)}else n.setState(function(){return{displayUser:a}}),t(!0)})})}else n.setState(function(){return{displayUser:a}}),t(!0)}).catch(function(t){n.setState(function(){return{displayUser:a}})})}else t(!0)})}));case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"refreshData",value:function(){function t(){return e.apply(this,arguments)}var e=o(d.default.mark(function t(){var e,a,n,r,o,s,i,l,u,c=this,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=1,a=new T.default,n=[],r=[],o=[],s=null,i=this.getParams(),!i.userIds){t.next=13;break}l=i.userIds.split(","),r.push({fieldName:"user.id",operator:"in",value:l}),o.push({fieldName:"id",operator:"in",value:l}),t.next=17;break;case 13:return t.next=15,a.getAction(w,"action-project-planning-attrs-project-domain");case 15:u=t.sent,s=u.attrs.userSet.domain;case 17:a.search("com.axelor.auth.db.User",o,0,null,["id"],[],s).then(function(t){var e=[];t.data&&(t.data.forEach(function(t){e.push({id:t.id,name:t.name,fullName:t.fullName,weekend:[],holiday:[],employeeId:null!==t.employee?t.employee.id:null})}),c.setState({displayUser:e}),c.setEmployeeData().then(function(t){var n=[];if(0===r.length){var o=e.map(function(t){return t.id});r.push({fieldName:"user.id",operator:"in",value:o})}a.search(w,r,0,null,["date"],C).then(function(t){var e=void 0===t.data?[]:t.data;e.length<=0?n.push({dummyCounter:P++}):e.forEach(function(t){var e={duration:Number(t.plannedHours),id:t.id,date:t.date,version:t.version,project:t.project.fullName,task:t.task,taskName:t["task.name"]||"",projectId:t.project.id,taskId:t.task?t.task.id:null,user:Object.assign({},t.user,{name:t.user.fullName})};n.push(e)}),n=c.sortTaskData(n);var a=c.groupTasks(n,f),r=a.tasks,o=a.dateWise,s=a.taskTotal,i=a.grandTotal,l=c.setDummyRecord(r,o,s);c.setState({rowDates:f,tasks:l.tasks,dateWise:l.dateWise,taskTotal:l.taskTotal,grandTotal:i,taskData:n})})}))});case 18:case"end":return t.stop()}},t,this)}));return t}()},{key:"setSubTaskList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=new T.default,n=[],r=[];null!==e?(n.push({fieldName:"project.id",operator:"=",value:e}),a.search("com.axelor.team.db.TeamTask",n,0,null,["id"],["name"]).then(function(e){e.data&&e.data.forEach(function(t){r.push({id:t.id,name:t.name})}),t.setState({subTaskList:r})})):this.setState({subTaskList:r})}},{key:"getUserListByProject",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=new T.default,n=[],r=[];null!==e&&n.push({fieldName:"id",operator:"=",value:e});var o=this.getParams(),s=[];return o.userIds&&(s=o.userIds.split(",")),null===e?void this.setState({userList:[]}):void a.search("com.axelor.apps.project.db.Project",n,0,null,["id"],["membersUserSet"]).then(function(e){if(e.data){var a=null!==e.data[0].membersUserSet?e.data[0].membersUserSet:[];a.forEach(function(t){s.length>0?s.indexOf(t.id.toString())>-1&&r.push(Object.assign({},t)):r.push(Object.assign({},t))}),t.setState({userList:r})}})}},{key:"getSelectionData",value:function(){var t=this,e=new T.default,a=[],n=null,r=this.getParams();r.userIds&&(n=r.userIds.split(","));var o="self.excludePlanning = false and self.statusSelect in (1,2)";e.search("com.axelor.apps.project.db.Project",[],0,null,["id"],["fullName","membersUserSet"],o).then(function(t){t.data&&t.data.forEach(function(t){var e=!0;if(null!==n){for(var r=0,o=function(e){var a=n[e],o=t.membersUserSet.filter(function(t){return t.id==a}).length>0;o&&(r=1)},s=0;s<n.length;s++)o(s);e=1===r}e&&a.push({id:t.id,fullName:t.fullName})})}),e.getAction(w,"action-hr-timesheet-line-attrs-domain-product").then(function(a){var n=a.attrs.product.domain;e.search(O,[],0,null,["id"],["fullName"],n).then(function(e){t.setState({productList:e.data,editor:Object.assign({},t.state.editor,{product:e.data?e.data[0]:null})})})}),this.setState({projectTaskList:a})}},{key:"componentDidMount",value:function(){var t=this.getParams(),e=this.getRowDates(this.state.modeCount,"week",t.fromDate,t.toDate);this.setState({rowDates:e}),this.refreshData(e),this.getSelectionData()}},{key:"validateForm",value:function(){var t=this.state.editor.project.id,e=this.state.editorError,a=!0;return null===this.state.editor.user.id?(e.user="User Must not be null!!!",a=!1):e.user="",null===t||void 0===t?(e.project="Project Must not be null!!!",this.setState({editorError:e}),a=!1):(e.project="",this.setState({editorError:e})),a}},{key:"addNewLine",value:function(){var t=this;if(this.validateForm()){var e=this.state,a=e.editor,n=e.taskData,r=(e.rowDates,n.filter(function(t){return t.date===a.date}),new T.default),o=({project:a.project.fullName,projectId:a.project.id,date:a.date,task:a.task,taskName:a.task?a.task.name:"",taskId:a.task.id,user:a.user,description:a.description,timepercent:a.timepercent},{project:{id:a.project.id},user:{id:a.user.id},timepercent:a.timepercent,fromDate:a.fromDate,toDate:a.toDate,description:a.description,product:a.product||null,date:a.fromDate});null!==a.task.id&&void 0!==a.task.id&&(o.task={id:a.task.id}),r.updateModel(o,w).then(function(e){var r=e.data[0],o={dummyCounter:P++,projectPlanningId:r.id,date:r.fromDate,duration:Number(0),project:r.project.fullName,task:r.task,taskName:a.task?a.task.name:"",projectId:r.project.id,taskId:r.task?r.task.id:null,user:Object.assign({},r.user,{name:r.user.fullName}),timepercent:t.state.params.timepercent||null};n.push(o);var s=t.groupTasks(n,t.state.rowDates),i=s.tasks,l=s.dateWise,u=s.taskTotal,d=s.grandTotal,c=t.setDummyRecord(i,l,u);t.setState({tasks:c.tasks,dateWise:c.dateWise,taskTotal:c.taskTotal,grandTotal:d,taskData:n})}),this.setState({show:!1})}}},{key:"saveData",value:function(t){var e=this,a=new T.default,n=this.state.taskData;t.duration<=0?t.id&&a.remove(t.id,w).then(function(a){var r=null;n.forEach(function(e,a){e.id===t.id&&(r=a)}),null!==r&&n.splice(r,1);var o=e.groupTasks(n,e.state.rowDates),s=o.tasks,i=o.dateWise,l=o.taskTotal,u=o.grandTotal,d=e.setDummyRecord(s,i,l);e.setState({tasks:d.tasks,dateWise:d.dateWise,taskTotal:d.taskTotal,grandTotal:u,taskData:n})}):a.updateModel(t,w).then(function(a){if(t.id){n.forEach(function(t,e){t.id===a.data[0].id&&(t.duration=Number(a.data[0].plannedHours),t.version=a.data[0].version,n[e]=Object.assign({},t))});var r=e.groupTasks(n,e.state.rowDates),o=r.tasks,s=r.dateWise,i=r.taskTotal,l=r.grandTotal,u=e.setDummyRecord(o,s,i);e.setState({tasks:u.tasks,dateWise:u.dateWise,taskTotal:u.taskTotal,grandTotal:l,taskData:n})}else if(a.data.length){var d=a.data[0];t.id=a.data[0].id,t.duration=Number(a.data[0].plannedHours),t.version=d.version,t.projectId=t.project.id,t.project=t.project.fullName;var c=null;n.forEach(function(e,a){e.dummyCounter&&e.dummyCounter===t.dummyCounter&&(c=a)}),null!==c?n[c]=Object.assign({},t):n.push(Object.assign({},t));var f=e.groupTasks(n,e.state.rowDates),p=f.tasks,m=f.dateWise,h=f.taskTotal,v=f.grandTotal,k=e.setDummyRecord(p,m,h);e.setState({tasks:k.tasks,dateWise:k.dateWise,taskTotal:k.taskTotal,grandTotal:v,taskData:n})}})}},{key:"cleanEditor",value:function(){this.setState({show:!0,editorError:{user:"",project:"",subTask:""},editor:{project:{id:null},task:{id:null},fromDate:(0,v.default)().format("YYYY-MM-DDTHH:mmZ"),toDate:(0,v.default)().format("YYYY-MM-DDTHH:mmZ"),timepercent:0,user:{id:null},description:null}})}},{key:"collapseUser",value:function(){var t=this.groupTasks(this.state.taskData,this.state.rowDates,this.state.fromDate),e=t.tasks,a=t.dateWise,n=t.taskTotal,r=t.grandTotal,o=this.setDummyRecord(e,a,n);this.setState({tasks:o.tasks,taskTotal:o.taskTotal,grandTotal:r,dateWise:o.dateWise})}},{key:"toggleProjectList",value:function(t){var e=this.state.selectedProjectList,a=e.indexOf(t);a>=0?e.splice(a,1):e.push(t),this.setState(function(){return{selectedProjectList:e}});var n=this.groupTasks(this.state.taskData,this.state.rowDates),r=n.tasks,o=n.dateWise,s=n.taskTotal,i=n.grandTotal,l=this.setDummyRecord(r,o,s);this.setState({tasks:l.tasks,dateWise:l.dateWise,taskTotal:l.taskTotal,grandTotal:i})}},{key:"confirmRemoveProjects",value:function(){var t="Do you really want to delete the selected record(s)?";this.setState({confirmPopUp:!0,confirmMessage:t})}},{key:"removeProjects",value:function(){var t=this,e=new T.default,a=[{fieldName:"id",operator:"in",value:this.state.selectedProjectList}],n=[];e.search("com.axelor.apps.project.db.ProjectPlanning",a,0,null,["id"],[]).then(function(a){a&&a.data.length&&(a.data.forEach(function(t){n.push({id:t.id,version:t.version})}),n.length>0&&e.removeAll(n,"com.axelor.apps.project.db.ProjectPlanning").then(function(e){if(a&&a.data){var n=a.data.map(function(t){return t.id}),r=t.state.taskData,o=r.map(function(t,e){if(n.indexOf(t.projectPlanningId)>-1)return e}).filter(function(t){return void 0!==t&&null!==t});o=o.sort(function(t,e){return e-t}),o.forEach(function(t){r.splice(t,1)});var s=t.groupTasks(r,t.state.rowDates),i=s.tasks,l=s.dateWise,u=s.taskTotal,d=s.grandTotal,c=t.setDummyRecord(i,l,u);t.setState({tasks:c.tasks,dateWise:c.dateWise,taskTotal:c.taskTotal,grandTotal:d,taskData:r})}}))})}},{key:"render",value:function(){var t=this,e=(new T.default,function(){return t.setState({show:!1,subTaskList:[],userList:[]})}),a=function(){return t.setState({confirmPopUp:!1})};return m.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},m.default.createElement("div",{style:{padding:"0% 3% 0% 0%"}},m.default.createElement("div",{className:"navbar",style:{minHeight:0}},m.default.createElement(k.ButtonToolbar,{style:{float:"left"}},m.default.createElement(k.ButtonGroup,{style:{marginRight:10}},m.default.createElement("button",{onClick:function(){return t.gotoPrev()},className:"navigation",style:{marginRight:5}},m.default.createElement(k.Glyphicon,{glyph:"chevron-left",style:{color:"white"}})),m.default.createElement("button",{onClick:function(){return t.gotoNext()},className:"navigation",style:{marginRight:5}},m.default.createElement(k.Glyphicon,{glyph:"chevron-right",style:{color:"white"}}))),m.default.createElement(k.Label,{className:"week"===this.state.mode?"activeLabel mode-label":"nonActive mode-label",onClick:function(e){return t.changeMode("week")}},(0,b.translate)("Week")),m.default.createElement(k.Label,{className:"month"===this.state.mode?"activeLabel mode-label":"nonActive mode-label",onClick:function(e){return t.changeMode("month")}},(0,b.translate)("Month"))),m.default.createElement(k.ButtonToolbar,{style:{float:"right"}},m.default.createElement(k.ButtonGroup,{style:{marginRight:10}},m.default.createElement("button",{onClick:function(){return t.cleanEditor()},className:"navigation",style:{marginRight:5}},m.default.createElement(k.Glyphicon,{glyph:"plus",style:{color:"white"}})),m.default.createElement("button",{onClick:function(){return t.confirmRemoveProjects()},className:"navigation"},m.default.createElement(k.Glyphicon,{glyph:"remove",style:{color:"white"}})))))),m.default.createElement(D.default,{rowDates:this.state.rowDates,changeDuration:function(e){t.updateDuration(e)},dateWise:this.state.dateWise,tasks:this.state.tasks,taskTotal:this.state.taskTotal,grandTotal:this.state.grandTotal,isLarge:"week"!==this.state.mode,toggleProjectList:function(e){return t.toggleProjectList(e)},collapseUser:function e(a){var e=t.state.collapseUser,n=e.indexOf(a);n>-1?e.splice(n,1):e.push(a),t.setState({collapseUser:e}),t.collapseUser()}}),m.default.createElement(k.Modal,{show:this.state.show,onHide:e,container:this,"aria-labelledby":"contained-modal-title"},m.default.createElement(k.Modal.Header,{closeButton:!0},m.default.createElement(k.Modal.Title,{id:"contained-modal-title"},(0,b.translate)("Project Planning"))),m.default.createElement(k.Modal.Body,null,m.default.createElement(k.FormGroup,null,m.default.createElement(k.ControlLabel,{style:{float:"left"}},(0,b.translate)("From Date"))," ",m.default.createElement("br",null),m.default.createElement("div",{style:{float:"left"}},m.default.createElement(g.default,{id:"example-datepicker",value:(0,v.default)(this.state.editor.fromDate,this.state.taskDateFormat).format(),dateFormat:"DD-MM-YYYY",onChange:function(e,a){t.setState({editor:Object.assign({},t.state.editor,{fromDate:(0,v.default)(e).format(t.state.taskDateFormat)})})}}))),m.default.createElement(k.FormGroup,null,m.default.createElement(k.ControlLabel,{style:{float:"left"}},(0,b.translate)("To Date"))," ",m.default.createElement("br",null),m.default.createElement("div",{style:{float:"left"}},m.default.createElement(g.default,{id:"example-datepicker",value:(0,v.default)(this.state.editor.toDate,this.state.taskDateFormat).format(),dateFormat:"DD-MM-YYYY",onChange:function(e,a){t.setState({editor:Object.assign({},t.state.editor,{toDate:(0,v.default)(e).format(t.state.taskDateFormat)})})}}))),m.default.createElement(k.FormGroup,{validationState:this.state.editorError.project.length>0?"error":null},m.default.createElement(k.ControlLabel,{style:{float:"left"}},(0,b.translate)("Project")),m.default.createElement(k.FormControl,{componentClass:"select",value:this.state.editor.project.id,onChange:function(e){var a=t.state.projectTaskList.filter(function(t){return t.id==e.target.value})[0];a=a?a:{id:null},t.setSubTaskList(a.id),t.getUserListByProject(a.id);var n=t.state.editorError;null===a.id?n.project="Project Must not be null!!!":n.project="",t.setState({editorError:n,editor:Object.assign({},t.state.editor,{project:a})})}},m.default.createElement("option",{key:-1,value:null},(0,b.translate)("")),this.state.projectTaskList.map(function(t,e){return m.default.createElement("option",{key:e,value:t.id},t.fullName)})),m.default.createElement(k.HelpBlock,{style:{textAlign:"left"}})),m.default.createElement(k.FormGroup,null,m.default.createElement(k.ControlLabel,{style:{float:"left"}},(0,b.translate)("TeamTask")),m.default.createElement(k.FormControl,{componentClass:"select",value:this.state.editor.task.id,onChange:function(e){var a=t.state.subTaskList.filter(function(t){return t.id==e.target.value})[0];a=a?a:{id:null},t.setState({editor:Object.assign({},t.state.editor,{task:a})})}},m.default.createElement("option",{key:-1,value:null},(0,b.translate)("")),this.state.subTaskList.map(function(t,e){return m.default.createElement("option",{key:e,value:t.id},t.name)}))),m.default.createElement(k.FormGroup,{validationState:this.state.editorError.user.length>0?"error":null},m.default.createElement(k.ControlLabel,{style:{float:"left"}},(0,b.translate)("Activity")),m.default.createElement(k.FormControl,{componentClass:"select",value:this.state.editor.product&&this.state.editor.product.id,onChange:function(e){var a=t.state.productList.filter(function(t){return t.id==e.target.value})[0];a=a?a:{id:null},t.setState({editor:Object.assign({},t.state.editor,{product:a})})}},m.default.createElement("option",{key:-1,value:null},(0,b.translate)("")),this.state.productList.map(function(t,e){return m.default.createElement("option",{key:e,value:t.id},t.fullName)})),m.default.createElement(k.HelpBlock,{style:{textAlign:"left"}})),m.default.createElement(k.FormGroup,{validationState:this.state.editorError.user.length>0?"error":null},m.default.createElement(k.ControlLabel,{style:{float:"left"}},(0,b.translate)("User")),m.default.createElement(k.FormControl,{componentClass:"select",value:this.state.editor.user.id,onChange:function(e){var a=t.state.userList.filter(function(t){return t.id==e.target.value})[0];a=a?a:{id:null};var n=t.state.editorError;null===a.id?n.user="User Must not be null!!!":n.user="",t.setState({editorError:n,editor:Object.assign({},t.state.editor,{user:a})})}},m.default.createElement("option",{key:-1,value:null},(0,b.translate)("")),this.state.userList.map(function(t,e){return m.default.createElement("option",{key:e,value:t.id},t.fullName)})),m.default.createElement(k.HelpBlock,{style:{textAlign:"left"}})),m.default.createElement(k.FormGroup,null,m.default.createElement(k.ControlLabel,{style:{float:"left"}},(0,b.translate)("Description")),m.default.createElement(k.FormControl,{componentClass:"textarea",placeholder:this.state.editor.description,value:this.state.editor.description,onChange:function(e){""===e.target.value?null:e.target.value;t.setState({editor:Object.assign({},t.state.editor,{description:e.target.value})})}})),m.default.createElement(k.FormGroup,null,m.default.createElement(k.ControlLabel,{style:{float:"left"}},(0,b.translate)("Time %")),m.default.createElement(k.FormControl,{componentClass:"select",value:this.state.editor.timepercent,onChange:function(e){t.setState({editor:Object.assign({},t.state.editor,{timepercent:Number(e.target.value)})})}},this.state.timepercentList.map(function(t,e){return m.default.createElement("option",{key:e,value:t},t," %")})))),m.default.createElement(k.Modal.Footer,null,m.default.createElement("button",{className:"addLine",style:{float:"right",color:"white"},onClick:function(){return t.addNewLine()}},"ADD A LINE"))),m.default.createElement(k.Modal,{show:this.state.confirmPopUp,onHide:a,container:this,bsSize:"small",animation:!1,"aria-labelledby":"contained-modal-title-sm"},m.default.createElement(k.Modal.Header,{closeButton:!0},m.default.createElement(k.Modal.Title,{id:"contained-modal-title"},(0,b.translate)("Confirm"))),m.default.createElement(k.Modal.Body,null,m.default.createElement("p",null,this.state.confirmMessage)),m.default.createElement(k.Modal.Footer,null,m.default.createElement("button",{className:"addLine",style:{float:"right",color:"white"},onClick:function(){t.setState({confirmPopUp:!1}),t.removeProjects()}},"Ok"),m.default.createElement("button",{className:"addLine",style:{float:"right",color:"white"},onClick:function(){return t.setState({confirmPopUp:!1})}},"Cancel"))))}}]),e}(p.Component);e.default=F},125:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t){return window._t&&"string"==typeof t?window._t(t):t}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();e.translate=i;var u=a(2),d=n(u),c=a(1),f=n(c),p=(a(106),a(80)),m=function(t){function e(t){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return a.state={data:{tasks:{}},isField:!0},a}return s(e,t),l(e,[{key:"getData",value:function(t,e){var a=this.props.data.tasks[t];return Object.assign({},a,{duration:""===e?"":parseFloat(e)})}},{key:"componentDidMount",value:function(){var t=this;if(this.props.isField){var e={};Object.keys(this.props.data.tasks).forEach(function(a){var n=t.props.data.tasks[a];n.duration=(0,p.convertNumberToTime)(n.duration),e[a]=n}),this.setState({data:Object.assign({},this.props.data,{
tasks:e}),isField:this.props.isField})}else this.setState({data:this.props.data,isField:this.props.isField})}},{key:"componentWillReceiveProps",value:function(t){if(t.isField){var e={};Object.keys(t.data.tasks).forEach(function(a){var n=t.data.tasks[a];n.duration=(0,p.convertNumberToTime)(n.duration),e[a]=Object.assign({},n)}),this.setState({data:Object.assign({},t.data,{tasks:e}),isField:t.isField})}else this.setState({data:t.data,isField:t.isField})}},{key:"isUser",value:function(t){return t.startsWith("dummyuser")||t.startsWith("user")}},{key:"selected",value:function(t){return this.state.data.tasks[t].isSelected}},{key:"render",value:function(){var t=this,e=this.props,a=e.isField,n=e.isToday,r=e.cellBackGroundColor,o=this.props.cellBackgroundColor||"#FFFFFF";o=this.props.isToday?"aliceblue":o;var s={backgroundColor:void 0!==r&&""+r,color:r&&"white",borderTop:r&&"0px !important"};return d.default.createElement("div",{style:{position:"relative",minWidth:this.state.isField?120:"auto",height:"100%",borderTop:"1px solid #DDDDDD"}},d.default.createElement("div",{style:{backgroundColor:o}},a?d.default.createElement("div",{className:"cell-height cell-header",style:{height:50}},d.default.createElement("div",{style:{height:"inherit",padding:10,paddingBottom:20,backgroundColor:n&&"rgba(2,117,216, 0.298039)"}},d.default.createElement("span",{style:{display:"block",fontWeight:"bold"}},i((0,f.default)(this.props.header,"YYYY-MM-DD").format("dddd"))),d.default.createElement("span",{style:{display:"block",fontWeight:"bold"}},i((0,f.default)(this.props.header,"YYYY-MM-DD").format("MMM"))," ",i((0,f.default)(this.props.header,"YYYY-MM-DD").format("DD"))))):d.default.createElement("div",{className:"cell-height cell-header",style:Object.assign({},s,{padding:10,paddingBottom:20,height:50,fontWeight:"bold"})},d.default.createElement("span",null,i(this.props.header))),d.default.createElement("div",{className:this.props.bodyStyleClass},this.props.isField?Object.keys(this.state.data.tasks).map(function(e,a){return d.default.createElement("div",{className:"cell-height",key:a,style:{borderTop:"1px solid #DDDDDD",backgroundColor:t.isUser(e)?"#F2F2F2":t.selected(e)?"#abb9d3":"#FFFFFF"}},d.default.createElement("div",{style:{height:"inherit",backgroundColor:n&&"rgba(2,117,216, 0.3)"}},e.startsWith("dummy")?d.default.createElement("span",{className:e.startsWith("dummyuser")&&""+t.state.data.tasks[e].durationClass},e.startsWith("dummyuser")?t.state.data.tasks[e].duration:""):d.default.createElement("input",{className:"duration-input",type:"text",tabIndex:a*t.props.noOfDays+t.props.index,style:{backgroundColor:"transparent"},value:t.state.data.tasks[e].duration,onChange:function(a){if((0,p.validateDuration)(a.target.value)){var n=t.state.data;n.tasks[e].duration=a.target.value,t.setState({data:n})}},onBlur:function(a){if((0,p.validateDuration)(a.target.value)&&""!==a.target.value)t.props.changeDuration(t.getData(e,(0,p.convertTimeToNumber)(a.target.value)));else{var n=t.state.data;n.tasks[e].duration=(0,p.convertNumberToTime)(t.props.data.tasks[e].duration),t.setState({data:n})}}})))}):Object.keys(this.props.data).map(function(e,a){return d.default.createElement("div",{className:"cell-height",key:a,style:Object.assign({},s,{borderTop:!r&&"1px solid #DDDDDD",cursor:t.props.data[e].projectPlanningId&&"pointer",overflowY:"auto",backgroundColor:r?s.backgroundColor:t.isUser(e)?"#F2F2F2":t.props.data[e].isSelected?"#abb9d3":"#FFFFFF"}),onClick:function(){return t.props.selectProject(t.props.data[e].projectPlanningId)}},e.startsWith("user")?d.default.createElement("div",{style:{padding:"2px 5px",fontWeight:"bold"}},d.default.createElement("span",{className:"collapseIcon",onClick:function(){return t.props.collapseUser(t.props.data[e].id)}},t.props.data[e].isCollapse?"+":"-"),t.props.data[e].name):d.default.createElement("div",{style:{padding:"2px 5px 2px 10px"}},isNaN(t.props.data[e])||t.props.data[e].title?t.props.data[e].title:(0,p.convertNumberToTime)(t.props.data[e])))})),d.default.createElement("div",{className:"task-footer",style:{color:"white",borderTop:!r&&"1px solid #DDDDDD",backgroundColor:"#334250",textAlign:"center"}},n?d.default.createElement("div",{style:{height:"inherit",backgroundColor:"rgba(2,117,216, 0.3)"}},d.default.createElement("span",{style:{display:"block",fontWeight:"bold",paddingTop:10}},i(this.props.footer)||(0,p.convertNumberToTime)(this.props.data.total||""))):this.props.isField&&Object.keys(this.state.data.tasks).filter(function(t){return t.startsWith("dummy")&&!t.startsWith("dummyuser")}).length===Object.keys(this.state.data.tasks).length?d.default.createElement("span",{style:{display:"block",fontWeight:"bold",paddingTop:10}}," "):d.default.createElement("span",{style:{display:"block",fontWeight:"bold",paddingTop:10}},i(this.props.footer)||(0,p.convertNumberToTime)(this.props.data.total)))))}}]),e}(u.Component);e.default=m},126:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=a(2),i=(n(s),a(569)),l=n(i),u={Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},d=function(){function t(e){r(this,t),this.state={restURL:"../../ws/rest/",actionURL:"../../ws/action/",baseURL:"../../",actionName:"com.axelor.apps.hr.service.timesheet.TimesheetService:getCurrentOrCreateTimesheet()"}}return o(t,[{key:"doLogin",value:function(t,e){l.default.post(this.state.baseURL+"login.jsp").withCredentials().send({username:t,password:e}).set("Accept","application/json").set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").end(function(t,e){})}},{key:"info",value:function(){fetch(this.state.baseURL+"ws/app/info",{method:"GET",credentials:"include",headers:u}).then(function(t){return t})}},{key:"remove",value:function(t,e){var a=this;return new Promise(function(n,r){l.default.delete(""+a.state.restURL+e+"/"+t).withCredentials().set("Accept","application/json").set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").end(function(t,e){e?n(e):r(t)})})}},{key:"removeAll",value:function(t,e){var a=this;return new Promise(function(n,r){l.default.post(""+a.state.restURL+e+"/removeAll").withCredentials().send({records:t}).set("Accept","application/json").set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").end(function(t,e){e?n(e.body):r(t)})})}},{key:"updateModel",value:function(t,e){return fetch(""+this.state.restURL+e,{method:"POST",credentials:"include",headers:u,body:JSON.stringify({data:t})}).then(function(t){return t.json()}).then(function(t){return t})}},{key:"fetch",value:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(r,o){l.default.post(""+a.state.restURL+t+"/"+e+"/fetch").withCredentials().send({data:n}).set("Accept","application/json").set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").end(function(t,e){var a=e.body;r({body:a})})})}},{key:"getAction",value:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=JSON.stringify({action:""+e,model:""+t,data:n});return new Promise(function(t,e){l.default.post(""+a.state.actionURL).withCredentials().send(r).set("Accept","application/json").set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").end(function(a,n){n?t(n.body.data[0]):e(a)})})}},{key:"callAction",value:function(t,e,a){var n=this,r=JSON.stringify({action:""+e,model:""+t,data:a});return new Promise(function(t,e){l.default.post(""+n.state.actionURL).withCredentials().send(r).set("Accept","application/json").set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").end(function(a,n){n?t(n.body):e(a)})})}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments[2],n=arguments[3],r=arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,i=JSON.stringify({data:{_domain:s,criteria:e,operator:"and"},offset:a,limit:n,sortBy:r});if(o.length>0){var l=JSON.parse(i);l.fields=o,i=JSON.stringify(l)}return fetch(""+this.state.restURL+t+"/search",{method:"POST",credentials:"include",headers:u,body:i}).then(function(t){return t.json()}).then(function(t){return t})}}]),t}();e.default=d},148:function(t,e){},332:function(t,e,a){"use strict";"undefined"==typeof Promise&&(a(421).enable(),window.Promise=a(420)),a(576),Object.assign=a(15)},334:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),l=a(2),u=n(l);a(405);var d=a(80),c=n(d),f=a(126),p=n(f),m=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),i(e,[{key:"componentDidMount",value:function(){var t=new p.default;t.doLogin("admin","admin")}},{key:"render",value:function(){return u.default.createElement("div",{className:"App"},u.default.createElement(c.default,null))}}]),e}(l.Component);e.default=m},335:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),l=a(2),u=n(l),d=a(1),c=n(d),f=(a(106),a(80));a(148);var p=a(125),m=n(p),h=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),i(e,[{key:"isToday",value:function(t){return(0,c.default)(t,"YYYY-MM-DD").isSame((0,c.default)().format("YYYY-MM-DD"))}},{key:"makeProjectTitle",value:function(t){var e={};return Object.keys(t).map(function(a){var n=t[a];if(a.startsWith("user"))e[a]=n;else{var r=""+n.project;n.taskId&&(r=r+" / "+n.taskName),e[a]=Object.assign({title:r},n)}}),e}},{key:"render",value:function(){var t=this,e=this.props.isLarge,a={overflowX:"auto",overflowY:"hidden",display:"inline-block",backgroundColor:"#FFFFFF",borderBottom:"1px solid #DDDDDD"};return e&&(a=Object.assign({},a)),u.default.createElement("div",{className:"timesheet-content"},u.default.createElement("div",{className:"task-content",style:{flex:1.035}},u.default.createElement(m.default,{bodyStyleClass:"text-content",footer:" ",data:this.makeProjectTitle(this.props.tasks),selectProject:function(e){return e&&t.props.toggleProjectList(e)},isField:!1,collapseUser:function(e){return t.props.collapseUser(e)}})),u.default.createElement("div",{style:Object.assign({},a,{flex:1.1})},u.default.createElement("div",{className:"duration-content",style:{width:120*Object.keys(this.props.dateWise).length}},this.props.dateWise&&Object.keys(this.props.dateWise).map(function(e,a){return u.default.createElement("div",{key:a,style:{width:120,display:"inline-block",height:"100%"}},u.default.createElement(m.default,{header:e,isToday:t.isToday(e),isField:!0,index:a+1,noOfDays:t.props.rowDates.length,data:t.props.dateWise[e],changeDuration:function(e){return t.props.changeDuration(e)}}))}))),u.default.createElement("div",{className:"footer-content",style:{width:"5%",flex:.3}},u.default.createElement(m.default,{bodyStyleClass:"footer-context",cellBackGroundColor:"#334250",header:(0,p.translate)("Total"),footer:(0,f.convertNumberToTime)(""+this.props.grandTotal),data:this.props.taskTotal,isField:!1})))}}]),e}(l.Component);e.default=h},336:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=a(2),o=n(r),s=a(20),i=n(s),l=a(334),u=n(l);a(406),i.default.render(o.default.createElement(u.default,null),document.getElementById("root"))},405:148,406:148});