<?xml version="1.0" encoding="UTF-8"?>
<domain-models xmlns="http://axelor.com/xml/ns/domain-models"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/domain-models http://axelor.com/xml/ns/domain-models/domain-models_5.0.xsd">

  <module name="stock" package="com.axelor.apps.stock.db"/>

  <entity name="StockMoveLine" lang="java">
  
    <many-to-one name="saleOrderLine" ref="com.axelor.apps.sale.db.SaleOrderLine" title="Sales order line"/>
    <many-to-one name="purchaseOrderLine" ref="com.axelor.apps.purchase.db.PurchaseOrderLine" title="Purchase order line"/>

    <decimal name="reservedQty" title="Reserved Qty"/>
    
    <many-to-one name="parentLine" ref="com.axelor.apps.stock.db.StockMoveLine" />
	<one-to-many name="subLineList" ref="com.axelor.apps.stock.db.StockMoveLine" mappedBy="parentLine" title="Pack lines"/>
    <decimal name="totalPack" title="Total pack"/>
	<integer name="packPriceSelect" title="Pack price select" selection="product.pack.price.select"/>

    <finder-method name="findAllBySaleOrder"
                   using="com.axelor.apps.sale.db.SaleOrder:saleOrder" all="true"
                   filter="self.stockMove.saleOrder = :saleOrder"/>

    <finder-method name="findAllBySaleOrderAndStatusSelect"
                   using="com.axelor.apps.sale.db.SaleOrder:saleOrder,Integer:statusSelect" all="true"
                   filter="self.stockMove.saleOrder = :saleOrder AND self.stockMove.statusSelect = :statusSelect"/>
                   
    <extra-code><![CDATA[
		public static final int PACK_PRICE_ONLY = 0;
		public static final int SUBLINE_PRICE_ONLY = 1;
	 ]]></extra-code>
  </entity>
</domain-models>
