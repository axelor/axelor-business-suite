<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">

	<grid model="com.axelor.apps.account.db.SubrogationRelease" title="Subrogation releases"
		name="subrogation-release-grid">
		<field name="sequence" />
		<field name="company" />
		<field name="company.factor" />
		<field name="statusSelect" />
	</grid>

	<form model="com.axelor.apps.account.db.SubrogationRelease" title="Subrogation release"
		name="subrogation-release-form">
	
		<menubar>
			<menu title="Print/Export">
				<item action="" title="Print to PDF" showIf="statusSelect >= 2"/>
				<item action="" title="Export to CSV" showIf="statusSelect >= 2"/>
			</menu>
		</menubar>

		<panel>
			<field name="sequence" />
			<field name="statusSelect" widget="NavSelect" colSpan="12" />
			<field name="company" form-view="company-form" />
			<field name="company.factor" readonly="true" form-view="partner-form" />
			<panel-related field="releaseDetails" grid-view="invoice-release-details-grid"
				form-view="invoice-form" colSpan="12" />
		</panel>

		<panel name="actions" title="Actions" sidebar="true">
			<button name="retrieveInvoices" title="Retrieve invoices from factorized customers"
				onClick="action-subrogation-release-retrieve-invoices" readonlyIf="company == null" />
			<button name="transmitRelease" title="Transmit release"
				onClick="action-subrogation-release-transmit-release" readonlyIf="releaseDetails == null || releaseDetails.length == 0"
				showIf="statusSelect == 1" />
		</panel>

	</form>

	<action-method name="action-subrogation-release-retrieve-invoices">
		<call class="com.axelor.apps.account.web.SubrogationReleaseController"
			method="retrieveInvoices" />
	</action-method>

	<action-method name="action-subrogation-release-transmit-release">
		<call class="com.axelor.apps.account.web.SubrogationReleaseController"
			method="transmitRelease" />
	</action-method>

</object-views>