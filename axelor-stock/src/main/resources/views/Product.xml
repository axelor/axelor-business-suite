<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">
    
    <action-record name="action-product-set-stock" model="com.axelor.apps.base.db.Product" if-module="axelor-stock">
        <field name="$realQty" expr="call:com.axelor.apps.stock.service.LocationService:getRealQty(id, null)" if="__config__.app.isApp('stock')" />
        <field name="$futureQty" expr="call:com.axelor.apps.stock.service.LocationService:getFutureQty(id, null)" if="__config__.app.isApp('stock')" />
        <field name="avgPrice" expr="call:com.axelor.apps.stock.service.LocationService:computeAvgPriceForProduct(id)" if="__config__.app.isApp('stock')" />
    </action-record>

    <action-attrs name="action-product-attrs-scale-and-precision-stock" if-module="axelor-stock">
        <attribute name="scale" for="avgPrice" expr="eval: __config__.app.getNbDecimalDigitForUnitPrice()" />
    </action-attrs>
</object-views>
